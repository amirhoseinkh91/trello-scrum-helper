<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <script>

  </script>
</head>
<html>
<body>
  <div id="velocity-table"></div>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <script type="module">

    function loadData() {
      var t = window.TrelloPowerUp.iframe();
      const velocities = t.arg('velocitiesPerMember');

      const table = document.createElement('table')
      table.innerHTML = "<thead><th>User</th><th>Not Started</th><th>Doing</th><th>Done</th></thead>"
      for (const velocityObject of velocities) {
        const newRow = document.createElement('tr')
        const tdUser = document.createElement('td')
        const tdNotStarted = document.createElement('td')
        const tdDoing = document.createElement('td')
        const tdDone = document.createElement('td')
        tdUser.textContent = velocityObject.username
        tdNotStarted.textContent = velocityObject.notStarted
        tdDoing.textContent = velocityObject.doing
        tdDone.textContent = velocityObject.done
        newRow.appendChild(tdUser)
        newRow.appendChild(tdNotStarted)
        newRow.appendChild(tdDoing)
        newRow.appendChild(tdDone)
        table.appendChild(newRow)
      }
      const target = document.getElementById('velocity-table');
      target.appendChild(table);
    }
    loadData()
  </script>
</body>
</html>
